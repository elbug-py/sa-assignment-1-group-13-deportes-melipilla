{% extends "base.html" %}
{% block title %}Top 10 mejor valorados{% endblock %}
{% block content %}
<h1 class="h4 mb-3">Top 10 libros mejor valorados</h1>
<div class="table-responsive">
<table class="table table-sm align-middle">
  <thead><tr>
    <th>Libro</th><th>Autor</th><th class="text-end">Score prom.</th>
    <th>Mejor rese√±a (m√°s popular)</th><th>Peor rese√±a</th>
  </tr></thead>
  <tbody>
    {% for row in items %}
      <tr>
        <td>{{ row.book.name }}</td>
        <td>{{ row.book.author.name }}</td>
        <td class="text-end">{{ row.avg_score|floatformat:2 }}</td>
        <td>
          {% if row.best %}<div><strong>{{ row.best.score }}/5</strong> ¬∑ üëç {{ row.best.up_votes }}<br>{{ row.best.review|truncatechars:120 }}</div>{% else %}<em>‚Äî</em>{% endif %}
        </td>
        <td>
          {% if row.worst %}<div><strong>{{ row.worst.score }}/5</strong> ¬∑ üëç {{ row.worst.up_votes }}<br>{{ row.worst.review|truncatechars:120 }}</div>{% else %}<em>‚Äî</em>{% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
